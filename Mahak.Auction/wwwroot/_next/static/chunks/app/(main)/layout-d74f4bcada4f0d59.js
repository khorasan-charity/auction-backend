(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{737:function(t,e,s){Promise.resolve().then(s.bind(s,9645)),Promise.resolve().then(s.bind(s,1389)),Promise.resolve().then(s.bind(s,3978))},9645:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return p}});var i=s(3827),n=s(1341),r=s(4339),l=s(4642),a=s(7082),o=s(568);function u(t){return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32",...t,children:(0,i.jsxs)("g",{fill:"none",children:[(0,i.jsx)("circle",{cx:16,cy:16,r:16,fill:"#f1b32b"}),(0,i.jsx)("path",{fill:"#fff",d:"M15.75 4C9.26 4 4 9.26 4 15.75S9.26 27.5 15.75 27.5S27.5 22.24 27.5 15.75A11.75 11.75 0 0 0 15.75 4m0 20.57a8.82 8.82 0 1 1 0-17.64a8.82 8.82 0 0 1 0 17.64m-2.93-8.81l2.94 4.4l2.92-4.4l-2.92-4.41z"})]})})}s(4090);var c=s(5313),d=s(6733),h=s(8009),m=s(1389),f=s(4651);let v=t=>{let{id:e,name:s,amount:r}=t,l=(0,c.usePathname)().toLowerCase().startsWith("/payment");return(0,i.jsxs)(n.Z,{className:"flex items-center gap-2 py-3 px-3 bg-slate-100",children:[l?(0,i.jsx)(x,{id:e}):(0,i.jsx)(u,{className:"w-12 h-12"}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"font-medium text-md",children:s||"ناشناس"}),(0,i.jsx)(f.Z,{amount:r,className:"font-extrabold text-lg text-left"})]})]})},x=t=>{let{id:e}=t,s=(0,a.NL)(),{mutateAsync:n}=(0,o.D)({mutationKey:["delete-payment"],mutationFn:r.bi}),l=async()=>{try{await n(e,{onSuccess:()=>{s.invalidateQueries({queryKey:["get-payment"]}),h.Am.success("حذف شد!")}})}catch(t){}};return(0,i.jsx)("button",{onClick:l,className:"w-12 h-12 bg-red-200/50 rounded-full cursor-pointer text-red-500 flex items-center justify-center",children:(0,i.jsx)(d.Bhs,{className:"w-8 h-8"})})};var p=()=>{var t;let{collapsed:e,setCollapsed:s}=(0,m.useSidebarCollapsed)(),{data:a}=(0,l.a)({queryKey:["get-payment"],queryFn:r._P,refetchInterval:1e3});return(0,i.jsxs)(i.Fragment,{children:[e?(0,i.jsx)("div",{className:"bg-[rgb(15_23_42/0.3)] fixed inset-0 z-30 lg:hidden block opacity-80 transition-opacity md:opacity-100",onClick:s}):null,(0,i.jsx)("aside",{className:"flex flex-col gap-2 h-full fixed lg:static w-2/3 md:w-[300px] transition-all duration-300 bottom-0 right-0 top-0 z-40 ".concat(e?"visible translate-x-0 [display:inherit]":"invisible translate-x-full lg:!translate-x-0 lg:!visible"),children:(0,i.jsxs)(n.Z,{className:"h-full w-full relative overflow-y-auto hideSB !pt-0 rounded-none md:rounded-xl",children:[(0,i.jsx)(n.Z.Header,{className:"sticky bg-white dark:bg-neutral-800 inset-x-0 top-0 pt-6 pb-4 w-full flex items-center justify-center",children:(0,i.jsx)("strong",{className:"font-bold text-xl",children:"آخرین پرداخت ها"})}),(0,i.jsx)(n.Z.Body,{children:(0,i.jsx)("div",{className:"overflow-y-auto w-full flex flex-col gap-3",children:null==a?void 0:null===(t=a.items)||void 0===t?void 0:t.map(t=>(0,i.jsx)(v,{id:t.id,name:t.name,amount:t.amount},t.id))})})]})})]})}},1389:function(t,e,s){"use strict";s.r(e),s.d(e,{useSidebarCollapsed:function(){return l}});var i=s(3827),n=s(4090);let r=(0,n.createContext)({}),l=()=>{let t=(0,n.useContext)(r);if(!t)throw Error("something went wrong!");return t};e.default=t=>{let{children:e}=t,[s,l]=(0,n.useState)(!1);return(0,i.jsx)(r.Provider,{value:{collapsed:s,setCollapsed:()=>l(!s)},children:e})}},2344:function(t,e,s){"use strict";let i=s(7908).Z.create({baseURL:"/api/app",headers:{"Content-Type":"application/json"}}),n={get:i.get,post:i.post,delete:i.delete,put:i.put,patch:i.patch};e.Z=n},4339:function(t,e,s){"use strict";s.d(e,{KX:function(){return r},_P:function(){return n},bi:function(){return l},uq:function(){return a}});var i=s(2344);let n=()=>i.Z.get("/payment").then(t=>t.data),r=t=>i.Z.post("/payment",t).then(t=>t.data),l=t=>i.Z.delete("/payment/".concat(t)).then(t=>t.data),a=()=>i.Z.get("/payment/total").then(t=>t.data)},1341:function(t,e,s){"use strict";var i=s(3827),n=s(1367);let r=t=>{let{children:e,className:s,...r}=t;return(0,i.jsx)("div",{className:(0,n.m6)("px-5 py-4 w-full bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 transition-all duration-400 rounded-xl",s),...r,children:e})};r.Body=t=>{let{children:e,className:s="",...r}=t;return(0,i.jsx)("div",{className:(0,n.m6)("w-full mt-4 lg:mt-7",s),...r,children:e})},r.Title=t=>{let{children:e,className:s="",...r}=t;return(0,i.jsxs)("div",{className:(0,n.m6)("flex justify-center w-fit items-center gap-2",s),...r,children:[(0,i.jsx)("span",{className:"rounded-full w-1.5 h-1.5 md:w-2 md:h-2 transition-all bg-secondary-600 dark:bg-secondary-500"}),(0,i.jsx)("strong",{className:"text-base md:text-lg xl:text-xl text-secondary-600 dark:text-secondary-500 transition-colors font-bold",children:e})]})},r.Header=t=>{let{children:e,className:s="",...r}=t;return(0,i.jsx)("div",{className:(0,n.m6)("flex justify-between items-center gap-2",s),...r,children:e})},e.Z=r},4651:function(t,e,s){"use strict";var i=s(3827),n=s(4259);e.Z=t=>{var e,s,r;return(0,i.jsxs)("strong",{className:null!==(e=t.className)&&void 0!==e?e:"font-bold text-xl",children:[(0,n.f)(null!==(s=t.amount)&&void 0!==s?s:0),"\xa0",(0,i.jsx)("span",{className:"font-normal text-sm",children:null!==(r=t.currency)&&void 0!==r?r:"تومان"})]})}},3978:function(t,e,s){"use strict";s.r(e);var i=s(3827),n=s(1389);s(4090);var r=s(6733);e.default=()=>{let{setCollapsed:t}=(0,n.useSidebarCollapsed)();return(0,i.jsx)("button",{onClick:t,className:"absolute top-5 left-5 block md:hidden",children:(0,i.jsx)(r.VnA,{className:"w-8 h-8 text-neutral-800 dark:text-white"})})}},4259:function(t,e,s){"use strict";s.d(e,{f:function(){return i}});let i=(t,e)=>{if(e||(e=""),isNaN(t))return"0 ".concat(e.trim()).trimEnd();let s=new Intl.NumberFormat().format(t);return"".concat(s,"  ").concat(e.trim()).trimEnd()}},568:function(t,e,s){"use strict";s.d(e,{D:function(){return N}});var i,n,r,l,a,o,u=s(4090),c=s(2731),d=s(8146),h=s(5577),m=s(4831),f=s(7920),v=s(1793),x=s(5139),p=s(4614),b=s(6063),y=(i=new WeakMap,n=new WeakMap,r=new WeakMap,l=new WeakMap,a=new WeakSet,o=new WeakSet,class extends p.l{bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;if(this.options=(0,c._)(this,i).defaultMutationOptions(t),(0,b.VS)(this.options,e)||(0,c._)(this,i).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,c._)(this,r),observer:this}),(null==e?void 0:e.mutationKey)&&this.options.mutationKey&&(0,b.Ym)(e.mutationKey)!==(0,b.Ym)(this.options.mutationKey))this.reset();else{var s;null===(s=(0,c._)(this,r))||void 0===s||s.setOptions(this.options)}}onUnsubscribe(){if(!this.hasListeners()){var t;null===(t=(0,c._)(this,r))||void 0===t||t.removeObserver(this)}}onMutationUpdate(t){(0,m._)(this,a,g).call(this),(0,m._)(this,o,_).call(this,t)}getCurrentResult(){return(0,c._)(this,n)}reset(){var t;null===(t=(0,c._)(this,r))||void 0===t||t.removeObserver(this),(0,h._)(this,r,void 0),(0,m._)(this,a,g).call(this),(0,m._)(this,o,_).call(this)}mutate(t,e){var s;return(0,h._)(this,l,e),null===(s=(0,c._)(this,r))||void 0===s||s.removeObserver(this),(0,h._)(this,r,(0,c._)(this,i).getMutationCache().build((0,c._)(this,i),this.options)),(0,c._)(this,r).addObserver(this),(0,c._)(this,r).execute(t)}constructor(t,e){super(),(0,f._)(this,a),(0,f._)(this,o),(0,d._)(this,i,{writable:!0,value:void 0}),(0,d._)(this,n,{writable:!0,value:void 0}),(0,d._)(this,r,{writable:!0,value:void 0}),(0,d._)(this,l,{writable:!0,value:void 0}),(0,h._)(this,n,void 0),(0,h._)(this,i,t),this.setOptions(e),this.bindMethods(),(0,m._)(this,a,g).call(this)}});function g(){var t,e;let s=null!==(e=null===(t=(0,c._)(this,r))||void 0===t?void 0:t.state)&&void 0!==e?e:(0,v.R)();(0,h._)(this,n,{...s,isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset})}function _(t){x.V.batch(()=>{if((0,c._)(this,l)&&this.hasListeners()){var e,s,i,r,a,o,u,d;let h=(0,c._)(this,n).variables,m=(0,c._)(this,n).context;(null==t?void 0:t.type)==="success"?(null===(e=(s=(0,c._)(this,l)).onSuccess)||void 0===e||e.call(s,t.data,h,m),null===(i=(r=(0,c._)(this,l)).onSettled)||void 0===i||i.call(r,t.data,null,h,m)):(null==t?void 0:t.type)==="error"&&(null===(a=(o=(0,c._)(this,l)).onError)||void 0===a||a.call(o,t.error,h,m),null===(u=(d=(0,c._)(this,l)).onSettled)||void 0===u||u.call(d,void 0,t.error,h,m))}this.listeners.forEach(t=>{t((0,c._)(this,n))})})}var w=s(7082),j=s(826);function N(t,e){let s=(0,w.NL)(e),[i]=u.useState(()=>new y(s,t));u.useEffect(()=>{i.setOptions(t)},[i,t]);let n=u.useSyncExternalStore(u.useCallback(t=>i.subscribe(x.V.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),r=u.useCallback((t,e)=>{i.mutate(t,e).catch(k)},[i]);if(n.error&&(0,j.L)(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:r,mutateAsync:n.mutate}}function k(){}}},function(t){t.O(0,[516,369,316,542,642,971,69,744],function(){return t(t.s=737)}),_N_E=t.O()}]);