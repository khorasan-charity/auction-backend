(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{51985:function(e,t,a){Promise.resolve().then(a.bind(a,34311))},34311:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var s=a(3827),l=a(94642),n=a(79454),r=a(44651),i=a(29891),c=a(51055),o=a(34622),d=a(77599),u=a(47082),m=a(20568),x=a(64090),h=a(82670),f=a(59414),g=a(31951),j=e=>{let t=(0,u.NL)(),{register:a,handleSubmit:l,formState:{errors:j},setValue:p,reset:v,watch:y}=(0,h.cI)(),b=y("targetAmount");(0,x.useEffect)(()=>{var t;e.addMode||(console.log(e),p("id",e.id),p("title",e.title),p("targetAmount",e.targetAmount)),p("order",null!==(t=e.order)&&void 0!==t?t:1)},[e]);let{mutateAsync:w,isPending:N}=(0,m.D)({mutationKey:["add-subject"],mutationFn:n.Z.addSubject}),{mutateAsync:C,isPending:S}=(0,m.D)({mutationKey:["update-subject"],mutationFn:n.Z.updateSubject});async function Z(e){await n.Z.deleteSubject(e),await t.invalidateQueries({queryKey:["get-subject"]})}let k=(0,x.useCallback)(async a=>{try{e.addMode?await w(a,{onSuccess:()=>{v(),t.invalidateQueries({queryKey:["get-subject"]}),f.ZP.success("با موفقیت ثبت شد")}}):await C({...a},{onSuccess:()=>{t.invalidateQueries({queryKey:["get-subject"]}),f.ZP.success("با موفقیت ثبت شد")}})}catch(e){f.ZP.error("ثبت با خطا مواجه شد")}},[w,t,v]);return(0,s.jsxs)(i.w,{className:"w-full overflow-visible shadow-none col-span-12 sm:col-span-6 md:col-span-4 lg:col-span-4 xl:col-span-3 border-none bg-gradient-to-br from-neutral-600 to-neutral-800",children:[(0,s.jsx)(c.G,{className:"flex justify-center items-center pb-0",children:(0,s.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:l(k),className:"space-y-4 w-full",children:[(0,s.jsx)(g.Z,{placeholder:"عنوان",name:"title",register:a,errors:j,validationSchema:{required:"لطفا عنوان را وارد کنید"},autoFocus:!0}),(0,s.jsx)(g.Z,{placeholder:"مبلغ",name:"targetAmount",register:a,endContent:"تومان",errors:j,validationSchema:{required:"لطفا مبلغ را وارد کنید"}}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(r.Z,{amount:b,className:"text-white font-extrabold text-lg"})}),(0,s.jsx)(g.Z,{placeholder:"ترتیب نمایش",name:"order",register:a,errors:j,validationSchema:{required:"لطفا ترتیب را وارد کنید"}}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,s.jsx)(o.A,{fullWidth:!0,radius:"sm",isLoading:N||S,color:"success",type:"submit",children:e.addMode?"افزودن":"بروزرسانی"}),!e.addMode&&(0,s.jsx)(o.A,{fullWidth:!0,radius:"sm",color:"danger",onClick:()=>Z(e.id),children:"حذف"})]})]})}),(0,s.jsx)(d.i,{className:"flex justify-center items-center pt-5 text-white"})]})},p=a(91341),v=a(82726),y=a(77190),b=a(57683),w=a(23376),N=()=>{let[e,t]=(0,x.useState)("0"),[a,n]=(0,x.useState)("5"),[i,c]=(0,x.useState)("2000000"),[d,u]=(0,x.useState)("2"),[m,h]=(0,x.useState)("10000000"),[g,j]=(0,x.useState)("4"),[N,C]=(0,x.useState)("8"),[S,Z]=(0,x.useState)("true"),{data:k}=(0,l.a)({queryKey:["get-settings"],queryFn:v.G,refetchInterval:1e3});async function A(e,t){try{await (0,v.L)(e,t),f.Am.success("اعمال شد")}catch(e){console.log(e),f.Am.error("خطایی رخ داد!")}}return(0,x.useEffect)(()=>{t((null==k?void 0:k.autoCameraDuration)||"0"),n((null==k?void 0:k.confettiDuration)||"0"),c((null==k?void 0:k.normalPaymentMaximum)||"0"),u((null==k?void 0:k.normalPaymentDuration)||"0"),h((null==k?void 0:k.silverPaymentMaximum)||"0"),j((null==k?void 0:k.silverPaymentDuration)||"0"),C((null==k?void 0:k.goldPaymentDuration)||"0"),Z((null==k?void 0:k.showMoneyShorter)||"true")},[k]),(0,s.jsxs)(p.Z,{className:"h-full w-[300px] px-2 relative overflow-y-auto !pt-0 rounded-none md:rounded-xl",children:[(0,s.jsx)(p.Z.Header,{className:"sticky bg-white dark:bg-neutral-800 inset-x-0 top-0 pt-4 pb-4 w-full flex items-center justify-center",children:(0,s.jsx)("strong",{className:"font-bold text-xl",children:"تنظیمات کلی"})}),(0,s.jsx)(p.Z.Body,{className:"overflow-y-auto h-[calc(100vh-10rem)] p-0 px-1",children:(0,s.jsxs)("div",{className:"overflow-y-auto w-full flex flex-col gap-3",children:[(0,s.jsxs)(y.g,{children:[(0,s.jsx)(o.A,{color:"success",onClick:()=>A("camera","on"),children:"نمایش دوربین"}),(0,s.jsx)(o.A,{color:"danger",onClick:()=>A("camera","off"),children:"عدم نمایش دوربین"})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2 border-1 rounded-md p-2 bg-slate-200",children:[(0,s.jsx)("span",{children:"مدت نمایش کاغذ رنگی (ثانیه)"}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,s.jsx)(b.Y,{placeholder:"ثانیه",value:a,onChange:e=>n(e.target.value),dir:"ltr"}),(0,s.jsx)(o.A,{color:"success",onClick:()=>A("confettiDuration",a),children:"اعمال"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2 border-1 rounded-md p-2 bg-slate-200",children:[(0,s.jsx)("span",{children:"مدت نمایش خودکار دوربین پس از تکمیل یک موضوع (ثانیه)"}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,s.jsx)(b.Y,{placeholder:"ثانیه",value:e,onChange:e=>t(e.target.value),dir:"ltr"}),(0,s.jsx)(o.A,{color:"success",onClick:()=>A("autoCameraDuration",e),children:"اعمال"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2 border-1 rounded-md p-2 bg-slate-200",children:[(0,s.jsx)("span",{children:"پرداخت‌های عادی"}),(0,s.jsx)(b.Y,{label:"از صفر تا مبلغ (تومان)",value:i,onChange:e=>c(e.target.value),dir:"ltr"}),(0,s.jsx)(r.Z,{amount:parseInt(i)}),(0,s.jsx)(b.Y,{label:"مکث (ثانیه)",value:d,onChange:e=>u(e.target.value),dir:"ltr"}),(0,s.jsx)(o.A,{color:"success",onClick:async()=>{await A("normalPaymentMaximum",i),await A("normalPaymentDuration",d)},children:"اعمال"})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2 border-1 rounded-md p-2 bg-slate-200",children:[(0,s.jsx)("span",{children:"پرداخت‌های نقره‌ای"}),(0,s.jsx)(b.Y,{label:"از عادی تا مبلغ (تومان)",value:m,onChange:e=>h(e.target.value),dir:"ltr"}),(0,s.jsx)(r.Z,{amount:parseInt(m)}),(0,s.jsx)(b.Y,{label:"مکث (ثانیه)",value:g,onChange:e=>j(e.target.value),dir:"ltr"}),(0,s.jsx)(o.A,{color:"success",onClick:async()=>{await A("silverPaymentMaximum",m),await A("silverPaymentDuration",g)},children:"اعمال"})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2 border-1 rounded-md p-2 bg-slate-200",children:[(0,s.jsx)("span",{children:"پرداخت‌های طلایی"}),(0,s.jsx)(b.Y,{label:"مکث (ثانیه)",value:N,onChange:e=>C(e.target.value),dir:"ltr"}),(0,s.jsx)(o.A,{color:"success",onClick:()=>A("goldPaymentDuration",N),children:"اعمال"})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center gap-y-2 border-1 rounded-md p-2 bg-slate-200",children:[(0,s.jsx)(w.K,{color:"success",isSelected:"true"==S,onValueChange:e=>Z(e?"true":"false"),children:"نمایش خلاصه‌تر مقدار پول"}),(0,s.jsx)(o.A,{color:"success",onClick:()=>A("showMoneyShorter",S),children:"اعمال"})]})]})})]})},C=()=>{var e;let{data:t}=(0,l.a)({queryKey:["get-subject"],queryFn:n.Z.getSubject});return(0,s.jsxs)("div",{className:"flex flex-row mt-5 gap-x-2 px-2 sm:px-0 w-full",children:[(0,s.jsx)(N,{}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-12 gap-4 h-[calc(100vh-3rem)] overflow-y-auto px-1",children:[null==t?void 0:t.items.map(e=>(0,s.jsx)(j,{...e,addMode:!1},e.id)),(0,s.jsx)(j,{addMode:!0,order:(null!==(e=null==t?void 0:t.items.length)&&void 0!==e?e:0)+1})]})]})}},72344:function(e,t,a){"use strict";let s=a(73107).Z.create({baseURL:"/api/app",headers:{"Content-Type":"application/json"}}),l={get:s.get,post:s.post,delete:s.delete,put:s.put,patch:s.patch};t.Z=l},82726:function(e,t,a){"use strict";a.d(t,{G:function(){return l},L:function(){return n}});var s=a(72344);async function l(){return(await s.Z.get("/settings/settings")).data}async function n(e,t){return(await s.Z.post("/settings/set?key=".concat(e,"&value=").concat(t))).data}},79454:function(e,t,a){"use strict";var s=a(72344);t.Z={getSubject:async()=>(await s.Z.get("/subject?skipCount=0&maxResultCount=1000")).data,addSubject:async e=>(await s.Z.post("/subject",e)).data,updateSubject:async e=>(await s.Z.put("/subject/".concat(e.id),e)).data,deleteSubject:async e=>(await s.Z.delete("/subject/".concat(e))).data}},91341:function(e,t,a){"use strict";var s=a(3827),l=a(51367);let n=e=>{let{children:t,className:a,...n}=e;return(0,s.jsx)("div",{className:(0,l.m6)("px-5 py-4 w-full bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 transition-all duration-400 rounded-xl",a),...n,children:t})};n.Body=e=>{let{children:t,className:a="",...n}=e;return(0,s.jsx)("div",{className:(0,l.m6)("w-full mt-4 lg:mt-7",a),...n,children:t})},n.Title=e=>{let{children:t,className:a="",...n}=e;return(0,s.jsxs)("div",{className:(0,l.m6)("flex justify-center w-fit items-center gap-2",a),...n,children:[(0,s.jsx)("span",{className:"rounded-full w-1.5 h-1.5 md:w-2 md:h-2 transition-all bg-secondary-600 dark:bg-secondary-500"}),(0,s.jsx)("strong",{className:"text-base md:text-lg xl:text-xl text-secondary-600 dark:text-secondary-500 transition-colors font-bold",children:t})]})},n.Header=e=>{let{children:t,className:a="",...n}=e;return(0,s.jsx)("div",{className:(0,l.m6)("flex justify-between items-center gap-2",a),...n,children:t})},t.Z=n},44651:function(e,t,a){"use strict";var s=a(3827),l=a(82726),n=a(54259),r=a(94642);t.Z=e=>{var t,a,i,c;let{data:o}=(0,r.a)({queryKey:["get-settings"],queryFn:l.G,refetchInterval:1e3});return(0,s.jsxs)("strong",{className:null!==(t=e.className)&&void 0!==t?t:"font-bold text-xl",children:[(0,n.f)(null!==(a=e.amount)&&void 0!==a?a:0,void 0,(null==o?void 0:o.showMoneyShorter)=="true"),"\xa0",(0,s.jsx)("span",{className:null!==(i=e.currencyClassName)&&void 0!==i?i:"font-normal text-sm",children:null!==(c=e.currency)&&void 0!==c?c:"تومان"})]})}},31951:function(e,t,a){"use strict";var s=a(3827),l=a(64090),n=a(51367),r=a(56733);let i=e=>{var t;let{name:a,type:i="text",required:c,register:o,errors:d,className:u,validationSchema:m,endContent:x,...h}=e,[f,g]=(0,l.useState)(!1);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{id:a,autoComplete:"off",spellCheck:!1,type:"password"===i?f?"text":"password":i,className:(0,n.m6)("textField__input",u),...o&&o(a,m||{})||{},...h}),!!x&&(0,s.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-neutral-200",children:x}),"password"===i&&(0,s.jsx)("button",{type:"button",onClick:()=>g(e=>!e),className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-600 dark:text-neutral-200",children:f?(0,s.jsx)(r.Vvo,{className:"w-6 h-6"}):(0,s.jsx)(r.N$t,{className:"w-6 h-6"})})]}),d&&d[a]&&(0,s.jsx)("p",{className:"text-red-500 text-right inline-block px-3 pt-2 text-sm w-full",children:null===(t=d[a])||void 0===t?void 0:t.message})]})};i.displayName="Input",t.Z=i},54259:function(e,t,a){"use strict";a.d(t,{f:function(){return s}});let s=(e,t,a)=>{if(t||(t=""),isNaN(e))return"0 ".concat(t.trim()).trimEnd();let s=new Intl.NumberFormat().format(e);return a&&(s.length<16&&s.endsWith(",000,000,000")?s=s.substring(0,s.length-12)+" میلیارد":s.length<12&&s.endsWith(",000,000")?s=s.substring(0,s.length-8)+" میلیون":s.length<8&&s.endsWith(",000")&&(s=s.substring(0,s.length-4)+" هزار")),"".concat(s,"  ").concat(t.trim()).trimEnd()}}},function(e){e.O(0,[516,224,377,642,800,414,415,343,568,760,622,729,670,967,971,69,744],function(){return e(e.s=51985)}),_N_E=e.O()}]);