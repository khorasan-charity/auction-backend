(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{70934:function(e,t,n){Promise.resolve().then(n.bind(n,9275))},9275:function(e,t,n){"use strict";n.r(t);var r=n(3827),o=n(91389),u=n(64339),a=n(31951),s=n(44651),i=n(34622),c=n(47082),l=n(20568),d=n(64090),f=n(82670),p=n(59414);t.default=()=>{let e=(0,c.NL)(),{setCollapsed:t}=(0,o.useSidebarCollapsed)(),{register:n,handleSubmit:m,formState:{errors:v},setValue:h,reset:g,watch:y}=(0,f.cI)(),x=y("amount"),E=y("suffix"),{mutateAsync:b,isPending:N}=(0,l.D)({mutationKey:["add-payment"],mutationFn:u.KX});(0,d.useEffect)(()=>{h("suffix","000")},[]);let T=(0,d.useCallback)(async t=>{try{await b({name:t.name,amount:t.amount+t.suffix},{onSuccess:()=>{var t;g(),h("suffix","000"),e.invalidateQueries({queryKey:["get-payment"]}),p.ZP.success("پرداخت با موفقیت ثبت شد"),null===(t=document.getElementById("amount"))||void 0===t||t.focus()}})}catch(e){p.ZP.error("ثبت پرداخت با خطا مواجه شد")}},[b,e,g]);return(0,r.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:m(T),className:"space-y-4",children:[(0,r.jsx)(a.Z,{placeholder:"عنوان",name:"name",register:n,errors:v}),(0,r.jsxs)("div",{className:"flex flex-row gap-x-1",dir:"ltr",children:[(0,r.jsx)(a.Z,{name:"amount",register:n,placeholder:"مبلغ",errors:v,validationSchema:{required:"لطفا مبلغ را وارد کنید"},style:{borderTopRightRadius:0,borderBottomRightRadius:0},autoFocus:!0}),(0,r.jsx)(a.Z,{name:"suffix",register:n,errors:v,validationSchema:{required:"لطفا عدد وارد کنید"},style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},maxLength:3,minLength:3})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(s.Z,{amount:parseInt(x+E),className:"font-extrabold text-lg"})}),(0,r.jsx)(i.A,{fullWidth:!0,radius:"sm",isLoading:N,color:"success",type:"submit",children:"ثبت"})]})}},91389:function(e,t,n){"use strict";n.r(t),n.d(t,{useSidebarCollapsed:function(){return a}});var r=n(3827),o=n(64090);let u=(0,o.createContext)({}),a=()=>{let e=(0,o.useContext)(u);if(!e)throw Error("something went wrong!");return e};t.default=e=>{let{children:t}=e,[n,a]=(0,o.useState)(!1);return(0,r.jsx)(u.Provider,{value:{collapsed:n,setCollapsed:()=>a(!n)},children:t})}},72344:function(e,t,n){"use strict";let r=n(73107).Z.create({baseURL:"/api/app",headers:{"Content-Type":"application/json"}}),o={get:r.get,post:r.post,delete:r.delete,put:r.put,patch:r.patch};t.Z=o},64339:function(e,t,n){"use strict";n.d(t,{Jg:function(){return i},KX:function(){return u},_P:function(){return o},bi:function(){return a},uq:function(){return s}});var r=n(72344);let o=()=>r.Z.get("/payment?Sorting=CreationTime%20DESC").then(e=>e.data),u=e=>r.Z.post("/payment",e).then(e=>e.data),a=e=>r.Z.delete("/payment/".concat(e)).then(e=>e.data),s=()=>r.Z.get("/payment/total").then(e=>e.data),i=()=>r.Z.get("/payment/contribution-count").then(e=>e.data)},82726:function(e,t,n){"use strict";n.d(t,{G:function(){return o},L:function(){return u}});var r=n(72344);async function o(){return(await r.Z.get("/settings/settings")).data}async function u(e,t){return(await r.Z.post("/settings/set?key=".concat(e,"&value=").concat(t))).data}},44651:function(e,t,n){"use strict";var r=n(3827),o=n(82726),u=n(54259),a=n(94642);t.Z=e=>{var t,n,s,i;let{data:c}=(0,a.a)({queryKey:["get-settings"],queryFn:o.G,refetchInterval:1e3});return(0,r.jsxs)("strong",{className:null!==(t=e.className)&&void 0!==t?t:"font-bold text-xl",children:[(0,u.f)(null!==(n=e.amount)&&void 0!==n?n:0,void 0,(null==c?void 0:c.showMoneyShorter)=="true"),"\xa0",(0,r.jsx)("span",{className:null!==(s=e.currencyClassName)&&void 0!==s?s:"font-normal text-sm",children:null!==(i=e.currency)&&void 0!==i?i:"تومان"})]})}},31951:function(e,t,n){"use strict";var r=n(3827),o=n(64090),u=n(51367),a=n(56733);let s=e=>{var t;let{name:n,type:s="text",required:i,register:c,errors:l,className:d,validationSchema:f,endContent:p,...m}=e,[v,h]=(0,o.useState)(!1);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{id:n,autoComplete:"off",spellCheck:!1,type:"password"===s?v?"text":"password":s,className:(0,u.m6)("textField__input",d),...c&&c(n,f||{})||{},...m}),!!p&&(0,r.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-neutral-200",children:p}),"password"===s&&(0,r.jsx)("button",{type:"button",onClick:()=>h(e=>!e),className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-600 dark:text-neutral-200",children:v?(0,r.jsx)(a.Vvo,{className:"w-6 h-6"}):(0,r.jsx)(a.N$t,{className:"w-6 h-6"})})]}),l&&l[n]&&(0,r.jsx)("p",{className:"text-red-500 text-right inline-block px-3 pt-2 text-sm w-full",children:null===(t=l[n])||void 0===t?void 0:t.message})]})};s.displayName="Input",t.Z=s},54259:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});let r=(e,t,n)=>{if(t||(t=""),isNaN(e))return"0 ".concat(t.trim()).trimEnd();let r=new Intl.NumberFormat().format(e);return n&&(r.length<16&&r.endsWith(",000,000,000")?r=r.substring(0,r.length-12)+" میلیارد":r.length<12&&r.endsWith(",000,000")?r=r.substring(0,r.length-8)+" میلیون":r.length<8&&r.endsWith(",000")&&(r=r.substring(0,r.length-4)+" هزار")),"".concat(r,"  ").concat(t.trim()).trimEnd()}},82901:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(64090);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:o}=e,u=r.createContext(void 0);return u.displayName=o,[u.Provider,function e(){var o;let a=r.useContext(u);if(!a&&t){let t=Error(n);throw t.name="ContextError",null==(o=Error.captureStackTrace)||o.call(Error,t,e),t}return a},u]}},34808:function(e,t,n){"use strict";n.d(t,{PB:function(){return i},Ts:function(){return r},mf:function(){return s},xb:function(){return a}});var r=!1;function o(e){return Array.isArray(e)}function u(e){let t=typeof e;return null!=e&&("object"===t||"function"===t)&&!o(e)}function a(e){return o(e)?o(e)&&0===e.length:u(e)?u(e)&&0===Object.keys(e).length:null==e||""===e}function s(e){return"function"==typeof e}var i=e=>e?"true":void 0},42255:function(e,t,n){"use strict";n.d(t,{a:function(){return r},w:function(){return o}});var[r,o]=(0,n(82901).k)({name:"ProviderContext",strict:!1})},53700:function(e,t,n){"use strict";n.d(t,{X:function(){return c}});var r=n(64090);let o=!1,u=0;function a(){o=!0,setTimeout(()=>{o=!1},50)}function s(e){"touch"===e.pointerType&&a()}function i(){if("undefined"!=typeof document)return"undefined"!=typeof PointerEvent?document.addEventListener("pointerup",s):document.addEventListener("touchend",a),u++,()=>{--u>0||("undefined"!=typeof PointerEvent?document.removeEventListener("pointerup",s):document.removeEventListener("touchend",a))}}function c(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:u,isDisabled:a}=e,[s,c]=(0,r.useState)(!1),l=(0,r.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,r.useEffect)(i,[]);let{hoverProps:d,triggerHoverEnd:f}=(0,r.useMemo)(()=>{let e=(e,r)=>{if(l.pointerType=r,a||"touch"===r||l.isHovered||!e.currentTarget.contains(e.target))return;l.isHovered=!0;let o=e.currentTarget;l.target=o,t&&t({type:"hoverstart",target:o,pointerType:r}),n&&n(!0),c(!0)},r=(e,t)=>{if(l.pointerType="",l.target=null,"touch"===t||!l.isHovered)return;l.isHovered=!1;let r=e.currentTarget;u&&u({type:"hoverend",target:r,pointerType:t}),n&&n(!1),c(!1)},s={};return"undefined"!=typeof PointerEvent?(s.onPointerEnter=t=>{o&&"mouse"===t.pointerType||e(t,t.pointerType)},s.onPointerLeave=e=>{!a&&e.currentTarget.contains(e.target)&&r(e,e.pointerType)}):(s.onTouchStart=()=>{l.ignoreEmulatedMouseEvents=!0},s.onMouseEnter=t=>{l.ignoreEmulatedMouseEvents||o||e(t,"mouse"),l.ignoreEmulatedMouseEvents=!1},s.onMouseLeave=e=>{!a&&e.currentTarget.contains(e.target)&&r(e,"mouse")}),{hoverProps:s,triggerHoverEnd:r}},[t,n,u,a,l]);return(0,r.useEffect)(()=>{a&&f({currentTarget:l.target},l.pointerType)},[a]),{hoverProps:d,isHovered:s}}}},function(e){e.O(0,[516,618,315,800,414,415,343,568,622,670,971,69,744],function(){return e(e.s=70934)}),_N_E=e.O()}]);