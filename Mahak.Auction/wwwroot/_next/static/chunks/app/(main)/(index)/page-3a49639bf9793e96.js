(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{4705:function(e,t,r){Promise.resolve().then(r.bind(r,5481))},5481:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var s=r(3827),a=r(4339),n=r(4642),l=r(4090),o=r(4651),c=r(8111),i=r(3031),d=r(1055),u=r(8019),x=r(7599);let m={green:"from-green-400 to-green-600",sky:"from-sky-500 to-sky-800",neutral:"from-neutral-600 to-neutral-800"};var g=e=>{var t;return(0,s.jsxs)(c.w,{className:"w-full shadow-none col-span-12 sm:col-span-6 md:col-span-4 lg:col-span-4 xl:col-span-3 border-none bg-gradient-to-br ".concat(e.progress?e.progress<100?m.sky:m.green:m.neutral),children:[(0,s.jsx)(i.u,{className:"w-full flex justify-center items-center",children:(0,s.jsx)("strong",{className:"text-lg font-bold text-white text-center",children:e.title})}),(0,s.jsx)(d.G,{className:"flex justify-center items-center pb-0",children:(0,s.jsx)(u.Z,{classNames:{svg:"w-36 h-36 drop-shadow-md",indicator:"stroke-white",track:"stroke-white/10",value:"text-3xl font-semibold text-white"},value:null!==(t=e.progress)&&void 0!==t?t:0,strokeWidth:4,showValueLabel:!0})}),(0,s.jsx)(x.i,{className:"flex justify-center items-center pt-5 text-white",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)(o.Z,{amount:e.collectedAmount}),(0,s.jsx)("span",{children:"از"}),(0,s.jsx)(o.Z,{amount:e.targetAmount})]})})]})},f=r(4832),p=r(1341),h=()=>(0,s.jsx)("div",{className:"w-12 h-12",children:(0,s.jsx)("img",{src:"/logo.png",alt:"logo",title:"logo",className:"w-full h-full object-cover",width:100,height:100})}),j=r(4712),b=r(2464),N=r(1774),w=r(1367),v=r(6733),y=e=>{let{className:t,classNames:r}=e,{theme:a,setTheme:n}=(0,N.F)(),{Component:l,slots:o,isSelected:c,getBaseProps:i,getInputProps:d,getWrapperProps:u}=(0,b.h)({isSelected:"light"===a,onChange:()=>{"light"===a?n("dark"):n("light")}});return(0,s.jsxs)(l,{...i({className:(0,w.m6)("px-px transition-opacity hover:opacity-80 cursor-pointer",t,null==r?void 0:r.base)}),children:[(0,s.jsx)(j.T,{children:(0,s.jsx)("input",{...d()})}),(0,s.jsx)("div",{...u(),className:o.wrapper({class:(0,w.m6)(["w-auto h-auto","bg-transparent","rounded-lg","flex items-center justify-center","group-data-[selected=true]:bg-transparent","!text-default-500","pt-px","px-0","mx-0"],null==r?void 0:r.wrapper)}),children:c?(0,s.jsx)(v.Fxr,{className:"w-6 h-6"}):(0,s.jsx)(v.YGJ,{className:"w-6 h-6"})})]})},k=()=>(0,s.jsx)(p.Z,{children:(0,s.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h,{}),(0,s.jsx)("strong",{className:"text-lg lg:text-xl font-bold truncate line-clamp-1",children:"موسسه حمایت از کودکان مبتلا به سرطان خراسان"})]}),(0,s.jsx)(y,{})]})}),Z=r(5338),A=r(7522),z=e=>{let{totalPayment:t,targetAmount:r,progress:a,surplus:n}=e;return(0,s.jsxs)(p.Z,{className:"overflow-hidden text-center pt-3 pb-1 px-2",children:[(0,s.jsxs)("div",{className:"w-full flex flex-wrap gap-0 gap-y-2 items-top justify-around inset-0 py-2",children:[(0,s.jsxs)(Z.z,{className:"bg-transparent border-0",size:"lg",children:[(0,s.jsx)("span",{className:"text-neutral-600 dark:text-white text-xl",children:"مبلغ جمع آوری شده: \xa0"}),(0,s.jsx)(o.Z,{amount:t,className:"font-extrabold text-2xl text-indigo-600 dark:text-indigo-300"})]}),(0,s.jsxs)(Z.z,{className:"bg-transparent border-0 ",size:"lg",children:[(0,s.jsx)("span",{className:"text-neutral-600 dark:text-white text-xl",children:"هدف: \xa0"}),(0,s.jsx)(o.Z,{amount:r,className:"font-extrabold text-2xl text-blue-600 dark:text-blue-300"})]}),n>0?(0,s.jsxs)(Z.z,{className:"border-0 bg-amber-300 dark:bg-amber-500",size:"lg",children:[(0,s.jsx)("span",{className:"text-neutral-600 dark:text-white",children:"مازاد هدف: \xa0"}),(0,s.jsx)(o.Z,{amount:n,className:"font-extrabold text-xl dark:text-white"})]}):null]}),(0,s.jsx)(A.W,{classNames:{base:"w-full p-2",track:"drop-shadow-md border border-default",indicator:"bg-gradient-to-r from-green-300 to-green-600",label:"tracking-wider font-medium text-default-600",value:"text-foreground/60"},className:"inset-0 rounded-none rotate-180 z-0",size:"lg",color:"success","aria-label":"Loading...",value:a}),(0,s.jsx)(Z.z,{className:"bg-transparent border-0",size:"lg",children:(0,s.jsx)("strong",{className:"font-semibold text-2xl ",children:"".concat(a,"%")})})]})},E=r(2344);async function _(){return(await E.Z.get("/subject")).data}var C=()=>{let[e,t]=(0,l.useState)([]),[r,o]=(0,l.useState)(0),[c,i]=(0,l.useState)(0),[d,u]=(0,l.useState)(0),[x,m]=(0,l.useState)(0),{data:p=0}=(0,n.a)({queryKey:["get-totalPayment"],queryFn:a.uq,enabled:e&&e.length>0,refetchInterval:1e3});return(0,l.useEffect)(()=>{_().then(e=>{t(e.items),m(e.items.reduce((e,t)=>e+=t.targetAmount,0))})},[]),(0,l.useEffect)(()=>{t(function(e){let t=e.reduce((e,t)=>e+=t.targetAmount,0);m(t),t>0?i(Math.floor(p/t*100)):i(0),u(p>t?p-t:0);let r=p,s=0;return e.forEach(e=>{r>=e.targetAmount?(r-=e.targetAmount,e.progress=100,e.collectedAmount=e.targetAmount,s++):r>0?(e.progress=Math.floor(r/e.targetAmount*100),e.collectedAmount=r,r=0):(e.progress=0,e.collectedAmount=0)}),o(e=>{if(s>e){let e=0,t=setInterval(()=>{(0,f.Z)({particleCount:15,angle:60,spread:80,origin:{x:0}}),(0,f.Z)({particleCount:15,angle:120,spread:80,origin:{x:1}}),++e>20&&clearInterval(t)},100)}return s}),e}(e.map(e=>({...e}))))},[p]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"sticky top-0 inset-y-0 z-50 flex flex-col gap-2 bg-gray-100 dark:bg-neutral-900",children:[(0,s.jsx)(k,{}),(0,s.jsx)(z,{surplus:d,progress:c,totalPayment:p,targetAmount:x})]}),(0,s.jsx)("div",{className:"w-full grid grid-cols-12 gap-4",children:null==e?void 0:e.map(e=>(0,s.jsx)(g,{...e},e.id))})]})}},2344:function(e,t,r){"use strict";let s=r(7908).Z.create({baseURL:"/api/app",headers:{"Content-Type":"application/json"}}),a={get:s.get,post:s.post,delete:s.delete,put:s.put,patch:s.patch};t.Z=a},4339:function(e,t,r){"use strict";r.d(t,{KX:function(){return n},_P:function(){return a},bi:function(){return l},uq:function(){return o}});var s=r(2344);let a=()=>s.Z.get("/payment").then(e=>e.data),n=e=>s.Z.post("/payment",e).then(e=>e.data),l=e=>s.Z.delete("/payment/".concat(e)).then(e=>e.data),o=()=>s.Z.get("/payment/total").then(e=>e.data)},1341:function(e,t,r){"use strict";var s=r(3827),a=r(1367);let n=e=>{let{children:t,className:r,...n}=e;return(0,s.jsx)("div",{className:(0,a.m6)("px-5 py-4 w-full bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 transition-all duration-400 rounded-xl",r),...n,children:t})};n.Body=e=>{let{children:t,className:r="",...n}=e;return(0,s.jsx)("div",{className:(0,a.m6)("w-full mt-4 lg:mt-7",r),...n,children:t})},n.Title=e=>{let{children:t,className:r="",...n}=e;return(0,s.jsxs)("div",{className:(0,a.m6)("flex justify-center w-fit items-center gap-2",r),...n,children:[(0,s.jsx)("span",{className:"rounded-full w-1.5 h-1.5 md:w-2 md:h-2 transition-all bg-secondary-600 dark:bg-secondary-500"}),(0,s.jsx)("strong",{className:"text-base md:text-lg xl:text-xl text-secondary-600 dark:text-secondary-500 transition-colors font-bold",children:t})]})},n.Header=e=>{let{children:t,className:r="",...n}=e;return(0,s.jsx)("div",{className:(0,a.m6)("flex justify-between items-center gap-2",r),...n,children:t})},t.Z=n},4651:function(e,t,r){"use strict";var s=r(3827),a=r(4259);t.Z=e=>{var t,r,n;return(0,s.jsxs)("strong",{className:null!==(t=e.className)&&void 0!==t?t:"font-bold text-xl",children:[(0,a.f)(null!==(r=e.amount)&&void 0!==r?r:0),"\xa0",(0,s.jsx)("span",{className:"font-normal text-sm",children:null!==(n=e.currency)&&void 0!==n?n:"تومان"})]})}},4259:function(e,t,r){"use strict";r.d(t,{f:function(){return s}});let s=(e,t)=>{if(t||(t=""),isNaN(e))return"0 ".concat(t.trim()).trimEnd();let r=new Intl.NumberFormat().format(e);return"".concat(r,"  ").concat(t.trim()).trimEnd()}}},function(e){e.O(0,[516,369,316,728,353,507,642,392,971,69,744],function(){return e(e.s=4705)}),_N_E=e.O()}]);